<section class="users-section">
<h2>Friend Requests</h2>
  <ul class="users-list">
      <% @users.each do |user| %>
        <% if user.friendships.where(friend_id: current_user.id, user_id: user.id, confirmed: false).count > 0 %>
          <li> Friend Request: <%= user.name%> </li>
          <%= button_to "Accept Friend Request", friendship_path(user), :method => :put %>

        <%end%>
      <%end%>
  </ul>
  <h2>Users List</h2>
  <ul class="users-list">
  
    <% @users.each do |user|%>
    <%unless current_user.id == user.id%>
   <li> Name: <%= user.name %> </li>
    <% if current_user.friendships.where(friend_id: user.id, user_id: current_user.id, confirmed: false).count > 0 %>   
    <p>Friendship Request Pending</p>
    <% elsif current_user.friendships.where(user_id: current_user.id, friend_id: user.id, confirmed: true).count > 0%>
      <%= button_to "Unfriend", friendship_path(user.id), method: :delete %>
    <% elsif user.friendships.where(user_id: user.id, friend_id: current_user.id, confirmed: true).count > 0%>
      <%= button_to "Unfriend", friendship_path(current_user.id), method: :delete %>
    <% elsif user.friendships.where(friend_id: current_user.id, user_id: user.id, confirmed: false).count > 0 %>
     <%= button_to "Accept Friend Request", friendship_path(user), :method => :put %>
    <% else%>
     <%= button_to "Add Friend", friendships_path, params: {friend_id: user.id}%>
    <%end%>

   <span class = "profile-link">
   <%= link_to "See Profile", user_path(user), class: 'profile-link'%>
  
   </span>
       <%end%>
<%end%>