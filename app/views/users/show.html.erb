<section class="user-section">
  <h2><%= "Name: #{@user.name}" %></h2>
     <%unless current_user.id == @user.id%>
    <% if current_user.friendships.where(friend_id: @user.id, user_id: current_user.id, confirmed: false).count > 0 %>   
    <p>Friendship Request Pending</p>
    <%= button_to "Cancel Request", friendship_path(@user.id), method: :delete %>
    <% elsif current_user.friendships.where(user_id: current_user.id, friend_id: @user.id, confirmed: true).count > 0%>
      <%= button_to "Unfriend", friendship_path(@user.id), method: :delete %>
    <% elsif @user.friendships.where(user_id: @user.id, friend_id: current_user.id, confirmed: true).count > 0%>
      <%= button_to "Unfriend", friendship_path(current_user.id), method: :delete %>     
    <% elsif @user.friendships.where(user_id: @user.id, friend_id: current_user.id, confirmed: false).count > 0%>
      <%= button_to "Decline Request", friendship_path(current_user.id), method: :delete %>
     <%= button_to "Accept Friend Request", friendship_path(@user), :method => :put %>
    <% else%>
     <%= button_to "Add Friend", friendships_path, params: {friend_id: @user.id}%>
    <%end%>
    <%end%>

  <article class="timeline">
    <h3>Recent posts:</h3>
    <ul class="posts">
      <%= render @posts %>
    </ul>
  </article>
</section>
